<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<configuration>
    <property>
        <name>afo.app.name</name>
        <value>wmgg_test_convert</value>
    </property>
    <property>
        <name>afo.app.queue</name>
        <value>root.zw05_training_cluster.hadoop-hdpmlp.sparse_job</value>
    </property>
    <property>
        <name>afo.container.mode</name>
        <value>job</value>
    </property>
    <property>
        <name>afo.docker.image.name</name>
        <value>registryonline-hulk.sankuai.com/custom_prod/com.sankuai.data.hadoop.gpu/tf1.15_mt1.2.2_c7_gpu_cuda10.0_cudnn7_runtime-a4b5ee39</value>
    </property>
    <property>
        <name>afo.engine.tensorflow.virtualenv.name</name>
        <value>mt_tensorflow</value>
    </property>
    <property>
        <name>afo.app.virtualenv.version.mt_tensorflow.path</name>
        <value>viewfs://hadoop-meituan/ghnn01/yarn/var/afo/tensorflow/virtualenv/release/tf1.15_mt1.2.0-centos6-cpu-venv.tar.gz</value>
    </property>
    <property>
        <name>with.tensor.board</name>
        <value>false</value>
    </property>

    <property>
        <name>afo.tensorflow.cog.mode</name>
        <value>0</value>
    </property>
     <property>
        <name>afo.docker.use.independent.ip</name>
        <value>true</value>
    </property>
    <!--property>
        <name>afo.role.worker.agent.process.num</name>
        <value>2</value>
    </property-->
    <property>
        <name>afo.app.env.SEASTAR_CORE_NUMBER</name>
        <value>0</value>
    </property>
    <!--property>
        <name>afo.child.memory</name>
        <value>25000</value>
    </property-->
    <property>
        <name>afo.engine.tensorflow.use.seastar</name>
        <value>false</value>
    </property>
    <property>
        <name>afo.use.gang.scheduler</name>
        <value>false</value>
    </property>

    <property>
        <name>afo.prefetch.data</name>
        <value>false</value>
    </property>
    <property>
        <name>afo.app.support.engine.failover</name>
        <value>false</value>
    </property>
    <property>
        <name>worker.input.local.dir</name>
        <value>inputs</value>
    </property>

    <property>
        <name>with.chief</name>
        <value>false</value>
    </property>
    <property>
        <name>chief.memory</name>
        <value>20480</value>
    </property>
    <property>
        <name>chief.vcore</name>
        <value>8</value>
    </property>
    <property>
        <name>chief.gpu</name>
        <value>0</value>
    </property>
    <property>
        <name>chief.script</name>
        <value>python train/main.py</value>
    </property>

    <property>
        <name>workers</name>
        <value>1</value>
    </property>
    <property>
        <name>worker.memory</name>
        <value>950000</value>
    </property>
    <property>
        <name>worker.vcore</name>
        <value>192</value>
    </property>
    <property>
        <name>worker.gcores80g</name>
        <value>8</value>
    </property>
    <property>
        <name>worker.script</name>
        <value>python train/convert.py</value>
    </property>

    <property>
        <name>parameter.servers</name>
        <value>0</value>
    </property>
    <property>
        <name>parameter.server.memory</name>
        <value>204800</value>
    </property>
    <property>
        <name>parameter.server.vcore</name>
        <value>64</value>
    </property>
    <property>
        <name>parameter.server.script</name>
        <value>python train/main.py</value>
    </property>

    <property>
        <name>evaluators</name>
        <value>0</value>
    </property>
    <property>
        <name>evaluator.memory</name>
        <value>204800</value>
    </property>
    <property>
        <name>evaluator.vcore</name>
        <value>16</value>
    </property>
    <property>
        <name>evaluator.gcores80g</name>
        <value>1</value>
    </property>
    <property>
        <name>evaluator.script</name>
        <value>python src/train_afo.py</value>
    </property>

    <property>
        <name>afo.role.worker.task.attempt.max.retry</name>
        <value>1</value>
    </property>
    <property>
        <name>afo.data.disable.chief.training</name>
        <value>true</value>
    </property>
    <property>
        <name>finish.by.chief</name>
        <value>false</value>
    </property>

    <property>
        <name>afo.role.worker.container.relax</name>
        <value>true</value>
    </property>
    <property>
        <name>afo.role.worker.env.TF_HDFS_CLIENT_JVM_MEM_M</name>
        <value>40960</value>
    </property>
    <property>
        <name>afo.role.ps.env.TF_HDFS_CLIENT_JVM_MEM_M</name>
        <value>40960</value>
    </property>


</configuration>